<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Profile</title>

    <!-- Tom Select CDN for multi-select skills -->
    <link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>

    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #eef2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: url("{{ url_for('static', filename='images/edit_pro.jpg') }}");
            background-repeat:no-repeat;
            background-size:cover;
        }

        .edit-container {
            width: 550px;
            background: #ffffff;
            padding: 35px;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.13);
        }

        .title {
            text-align: center;
            font-size: 26px;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .form-group { margin-bottom: 18px; }
        label { font-weight: bold; margin-bottom: 6px; display: block; }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        .error {
            color: red;
            font-size: 14px;
            display: none;
            margin-top: 4px;
        }

        .btn {
            background: #2196F3;
            color: white;
            padding: 14px;
            width: 100%;
            border-radius: 6px;
            font-size: 17px;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }

        .btn:hover { background: #0b7dda; }
    </style>
</head>

<body>

<div class="edit-container">

    <div class="title">Edit Profile</div>

    <form method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">

        <!-- NAME -->
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="name" value="{{ user.name }}" required>
        </div>

        <!-- EMAIL -->
        <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" value="{{ user.email }}" required>
        </div>

        <!-- PHONE -->
        <div class="form-group">
            <label>Phone Number</label>
            <input type="text" id="phone" name="phone" value="{{ user.phone }}" maxlength="10" required>
            <div id="phone-error" class="error">Phone number must be exactly 10 digits</div>
        </div>

        <!-- GENDER -->
        <div class="form-group">
            <label>Gender</label>
            <select name="gender" required>
                <option value="">-- Select Gender --</option>
                <option value="Male"   {% if user.gender=='Male' %}selected{% endif %}>Male</option>
                <option value="Female" {% if user.gender=='Female' %}selected{% endif %}>Female</option>
                <option value="Other"  {% if user.gender=='Other' %}selected{% endif %}>Other</option>
            </select>
        </div>

        <!-- DOB -->
        <div class="form-group">
            <label>Date of Birth</label>
            <input type="date" name="dob" value="{{ user.dob }}" required>
        </div>

        <!-- MULTI-SELECT SKILLS -->
        <div class="form-group">
            <label>Skills</label>

            <select id="skills" name="skills[]" multiple>

                <!-- PREDEFINED PROFESSIONAL SKILLS -->
                <option value="Python">Python</option>
                <option value="Java">Java</option>
                <option value="HTML">HTML</option>
                <option value="CSS">CSS</option>
                <option value="JavaScript">JavaScript</option>
                <option value="SQL">SQL</option>
                <option value="Machine Learning">Machine Learning</option>
                <option value="Deep Learning">Deep Learning</option>
                <option value="Data Science">Data Science</option>
                <option value="React">React</option>
                <option value="Flask">Flask</option>
                <option value="Django">Django</option>
                <option value="Communication">Communication</option>
                <option value="Leadership">Leadership</option>
                <option value="Team Work">Team Work</option>

            </select>

        </div>

        <!-- EXPERIENCE -->
        <div class="form-group">
            <label>Experience</label>
            <input type="text" name="experience" value="{{ user.experience }}">
        </div>

        <!-- BIO -->
        <div class="form-group">
            <label>Bio</label>
            <textarea name="bio" rows="3">{{ user.bio }}</textarea>
        </div>

        <!-- PROFILE PIC -->
        <div class="form-group">
            <label>Profile Picture</label>
            <input type="file" name="profile_pic">
        </div>

        <button class="btn">Update Profile</button>
    </form>

</div>

<script>
/* ------------------------
 PHONE VALIDATION (10 digits)
-------------------------*/
function validateForm() {
    let phone = document.getElementById("phone").value;
    let phoneError = document.getElementById("phone-error");

    if (!/^\d{10}$/.test(phone)) {
        document.getElementById("phone").style.border = "2px solid red";
        phoneError.style.display = "block";
        return false;
    } else {
        document.getElementById("phone").style.border = "2px solid #4CAF50";
        phoneError.style.display = "none";
        return true;
    }
}

/* ------------------------
 MULTI-SELECT SKILLS
-------------------------*/
new TomSelect("#skills", {
    plugins: ['remove_button'],
    persist: false,
    create: false,
    maxItems: 10,
    placeholder: "Select your skills..."
});
</script>
</body>
</html>
